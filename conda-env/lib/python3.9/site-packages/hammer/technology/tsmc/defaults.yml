# Settings for the tsmc28 technology to be overriden by the project.
technology.tsmc:
  pdk_install_dir: "/export/home/yyzhao/vm/shared/workspace/library/tsml28/digital"

# Set some defaults for this technology.
# For quick performance evaluations, use the typical voltage+temperature corners.
vlsi:
  core:
    technology: TSMC
    node: 28
    sram_generator_tool: "hammer.technology.tsmc.sram_compiler"
  inputs:
    supplies: # Supply voltages.建议是setup用ss，温度最高，供电电压最低；hold反之。无工艺角就统一用同一个
      VDD: "0.99 V"
      GND: "0 V"
    mmmc_corners: [
      {
        "name": "ffg0p99v0c",
        "type": "setup",
        "voltage": "0.99 V",
        "temp": "0 C"
      },
      {
        "name": "ffg0p99v0c",
        "type": "hold",
        "voltage": "0.99 V",
        "temp": "0 C"
      }
    ] # mmmc corners config.

  technology:
    placement_site: "core" # Set standard cell LEF placement site

    bump_block_cut_layer: "RV" # Set the layer that blocks vias under bumps，金属层和pad之间

    tap_cell_interval: "40" # Set the interval and offset for tap cells n-well，p衬底于vdd/vss短接，抑制闩锁效应降低片上电阻，按interval周期性插入tap cell
    tap_cell_offset: "20" # Set the interval and offset for tap cells

technology.core:
  stackup: "tsmc28_5Ma_2Mb_2Mc" # This key should exist in the stackups list in the tech json
  std_cell_rail_layer: "M1" # This should specify the TOPMOST metal layer the standard cells use for power rails
  # Note that this is not usually stackup specific; it is based on the std cell libraries themselves
  tap_cell_rail_reference: "{TAPCELL*}" # This is used to provide a reference master for generating standard cells

par.inputs:
  gds_merge: true # gds_merge: true is mandatory,
  # The shrink script in __init__.py filters stdcells but expects all other input GDSs to be 4x upscaled.
  # If user decides to set this to false, all other GDSs (e.g. hard macros) need to be 1x scaled
  # TODO: change export_config_outputs for PaR inputs to expose gds_merge to output json

par.power_straps_mode: generate # Power straps (most DRC-clean)
par.generate_power_straps_method: by_tracks
par.generate_power_straps_options:
  by_tracks:
    strap_layers:
      - M2
      - M3
      - M4
      - M5
      - M6
      - M7
      - M8
      - M9
      - M10
    pin_layers:
      - M1

    track_width:        4       #需要确认，经验驱动的设置
    track_spacing:      4          
    track_start:        0          
    power_utilization:  0.25       

    track_width_M6:        6       
    track_spacing_M6:      6
    power_utilization_M6:  0.35    

    track_width_M7:        6
    track_spacing_M7:      6
    power_utilization_M7:  0.35

    track_width_M8:        6        
    track_spacing_M8:      6
    power_utilization_M8:  1.0    

    track_width_M9:        6
    track_spacing_M9:      6
    power_utilization_M9:  1.0

power.voltus:
  lef_layer_map: "lefdefLayer.map" #./Back_End/lef/tcbn28hpcplusbwp35p140hvt_110a/techfiles/Virtuoso/mapfile/目录下，需要挑选
  lef_layer_map_meta: prependlocal

mentor.extra_env_vars:
  - VAR_M4_YOFFSET: "0"
  - VAR_M5_XOFFSET: "0"
  - VAR_M6_YOFFSET: "0"
  - VAR_M7_XOFFSET: "0"
mentor.layerprops: "calibre.layerprops"
mentor.layerprops_meta: prependlocal
drc.calibre.version: "2017.3_38.30" # 2017-year only Calibre supported by decks
lvs.calibre.version: "2017.3_38.30"
